(()=>{"use strict";const t=[["zero",0],["ra",0],["sp",0],["gp",0],["tp",0],["t0",0],["t1",0],["t2",0],["s0",0],["s1",0],["a0",0],["a1",0],["a2",0],["a3",0],["a4",0],["a5",0],["a6",0],["a7",0],["s2",0],["s3",0],["s4",0],["s5",0],["s6",0],["s7",0],["s8",0],["s9",0],["s10",0],["s11",0],["t3",0],["t4",0],["t5",0],["t6",0]],e=new class{mem={};constructor(){}read1(t){return this.mem[t]||0}write1(t,e){this.mem[t]=e}read2(t){let e=this.read1(t);return this.read1(t+1)<<8|e}write2(t,e){var s=255&e,a=e>>8;this.write1(t,s),this.write1(t+1,a)}read4(t){let e=this.read2(t);return this.read2(t+1)<<16|e}write4(t,e){let s=65535&e,a=e>>16;this.write2(t,s),this.write2(t+1,a)}};function s(t){const e="0x"+t.toString(16).toUpperCase(),s="0b"+t.toString(2);return[t,e,s]}const a=new class{codeAreaWrapper=document.getElementById("codeArea");codeLineNumbersArea=document.getElementById("codeLineNumbers");codeArea=document.getElementById("code");regsArea=document.getElementById("regs");memArea=document.getElementById("mem");code_actions_btns={open_file_input:document.getElementById("open-file-choose-input"),play_btn:document.getElementById("play-btn"),stop_btn:document.getElementById("stop-btn")};format_btns={dec_format_btn:document.getElementById("format-btn-dec"),hex_format_btn:document.getElementById("format-btn-hex"),bin_format_btn:document.getElementById("format-btn-bin")};code_tabs={code_tab:document.getElementById("code-tab"),data_tab:document.getElementById("data-tab"),execution_tab:document.getElementById("execution-tab")};details_inputs={pc:document.getElementById("pc-input"),instruction_address:document.getElementById("instruction-address-input"),first_memory_address:document.getElementById("first-memory-address-input")};regs=void 0;mem=void 0;isPlaying=!1;firstAddress=8e3;visibleFormat="decimal";currentTab="code";codeContent="";dataContnet="";constructor(){}setRegs(t){this.regs=t}setMem(t){this.mem=t}setupCode(){this.codeAreaWrapper.onclick=t=>{this.codeArea.focus()},this.codeArea.addEventListener("input",(t=>{let e=t.target.value;const s=e.split("\n").length;this.codeLineNumbersArea.innerHTML=Array(s).fill("<span></span>").join(""),"code"===this.currentTab?this.codeContent=e:"data"===this.currentTab&&(this.dataContnet=e)}),!1),this.code_actions_btns.open_file_input.onchange=t=>{let e=this.code_actions_btns.open_file_input.files[0],s=new FileReader;s.readAsText(e,"UTF-8"),s.onload=t=>{let e=t.target.result;this.codeArea.value=e,this.update()}},this.code_actions_btns.play_btn.onclick=t=>{this.setIsPlaying(!0)},this.code_actions_btns.stop_btn.onclick=t=>{this.setIsPlaying(!1)},this.format_btns.dec_format_btn.onclick=t=>{this.removeAllFormatButtonSelections(),this.format_btns.dec_format_btn.classList.add("selected"),this.setFormat("decimal")},this.format_btns.hex_format_btn.onclick=t=>{this.removeAllFormatButtonSelections(),this.format_btns.hex_format_btn.classList.add("selected"),this.setFormat("hexadecimal")},this.format_btns.bin_format_btn.onclick=t=>{this.removeAllFormatButtonSelections(),this.format_btns.bin_format_btn.classList.add("selected"),this.setFormat("binary")},this.code_tabs.code_tab.onclick=t=>{this.removeAllTabButtonSelections(),this.code_tabs.code_tab.classList.add("selected"),this.setCurrentTab("code")},this.code_tabs.data_tab.onclick=t=>{this.removeAllTabButtonSelections(),this.code_tabs.data_tab.classList.add("selected"),this.setCurrentTab("data")},this.code_tabs.execution_tab.onclick=t=>{this.removeAllTabButtonSelections(),this.code_tabs.execution_tab.classList.add("selected"),this.setCurrentTab("execution")},this.updateCode()}setupRegisters(){this.updateRegisters()}setupMemory(){this.updateMemory()}setupDetails(){this.details_inputs.first_memory_address.value=this.firstAddress.toString(),this.details_inputs.first_memory_address.oninput=t=>{let e=this.details_inputs.first_memory_address.value;console.log(typeof e),this.firstAddress=parseInt(e),this.update()},this.updateDetails()}setup(t,e){void 0!==t&&this.setRegs(t),void 0!==e&&this.setMem(e),this.setupCode(),this.setupRegisters(),this.setupMemory(),this.setupDetails()}updateCode(){this.isPlaying?(this.code_actions_btns.play_btn.style.display="none",this.code_actions_btns.stop_btn.style.display="flex"):(this.code_actions_btns.play_btn.style.display="flex",this.code_actions_btns.stop_btn.style.display="none"),this.codeArea.dispatchEvent(new Event("input"))}updateCodeTab(){"code"===this.currentTab?(this.codeArea.value=this.codeContent,this.codeArea.placeholder=""):"data"===this.currentTab&&(this.codeArea.value=this.dataContnet,this.codeArea.placeholder="Address(Decimal) : Data(Decimal)\n8000 : 5"),this.update()}updateRegisters(){let t=this.regs,e=["decimal","hexadecimal","binary"].indexOf(this.visibleFormat);-1==e&&(e=0);let a='<tr class="register">\n\t\t\t\t\t\t<th class="registerName">Register</th>\n\t\t\t\t\t\t<th class="registerValue">Value</th>\n\t\t\t\t\t\t<th class="registerName">Register</th>\n\t\t\t\t\t\t<th class="registerValue">Value</th>\n\t\t\t\t\t\t</tr>';for(let i=0;i<t.length;i+=2){let d=[s(t[i][1]),s(t[i+1][1])];a+=`<tr class="register">\n\t\t\t\t\t\t\t<td class="registerName">${t[i][0]} [${i}]</td>\n\t\t\t\t\t\t\t<td class="registerValue">${d[0][e]}</td>\n\t\t\t\t\t\t\t<td class="registerName">${t[i+1][0]} [${i+1}]</td>\n\t\t\t\t\t\t\t<td class="registerValue">${d[1][e]}</td>\n\t\t\t\t\t\t\t</tr>`}this.regsArea.innerHTML=`<tbody>${a}</tbody>`}updateMemory(){let t=this.mem,e=this.firstAddress,a=["decimal","hexadecimal","binary"].indexOf(this.visibleFormat);-1==a&&(a=0);let i='<tr>\n\t\t\t\t\t\t\t<td class="memoryAddress">Address</td>\n\t\t\t\t\t\t\t<td class="memoryValue">+3</td>\n\t\t\t\t\t\t\t<td class="memoryValue">+2</td>\n\t\t\t\t\t\t\t<td class="memoryValue">+1</td>\n\t\t\t\t\t\t\t<td class="memoryValue">+0</td>\n\t\t\t\t\t\t</tr>';for(let d=0;d<6;d++){let d=[t.read1(e),t.read1(e+1),t.read1(e+2),t.read1(e+3)];d=[s(d[0]),s(d[1]),s(d[2]),s(d[3])],i+=`<tr>\n\t\t\t\t\t\t\t<td class="memoryAddress">${e}</td>\n\t\t\t\t\t\t\t<td class="memoryValue">${d[3][a]}</td>\n\t\t\t\t\t\t\t<td class="memoryValue">${d[2][a]}</td>\n\t\t\t\t\t\t\t<td class="memoryValue">${d[1][a]}</td>\n\t\t\t\t\t\t\t<td class="memoryValue">${d[0][a]}</td>\n\t\t\t\t\t\t</tr>`,e+=4}this.memArea.innerHTML=`<tbody>${i}</tbody>`}updateDetails(){}update(){this.updateCode(),this.updateRegisters(),this.updateMemory(),this.updateDetails()}removeAllFormatButtonSelections(){this.format_btns.dec_format_btn.classList.remove("selected"),this.format_btns.hex_format_btn.classList.remove("selected"),this.format_btns.bin_format_btn.classList.remove("selected")}removeAllTabButtonSelections(){this.code_tabs.code_tab.classList.remove("selected"),this.code_tabs.data_tab.classList.remove("selected"),this.code_tabs.execution_tab.classList.remove("selected")}setIsPlaying(t){this.isPlaying=t,this.update()}setFormat(t){["decimal","hexadecimal","binary"].includes(t)?this.visibleFormat=t:this.visibleFormat="decimal",this.update()}setCurrentTab(t){this.currentTab!==t&&(["code","data","execution"].includes(t)?this.currentTab=t:this.currentTab="code",this.updateCodeTab())}};t[5][1]=21,t[6][1]=22,t[7][1]=23,e.write1(8001,21),e.write1(8017,4),e.write1(8008,106),a.setup(t,e)})();